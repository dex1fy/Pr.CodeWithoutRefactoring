# Order System (до рефакторинга)

Этот проект демонстрирует «плохой» пример реализации обработки заказов. Код написан без соблюдения принципов чистого кода и сопровождаемости. Он служит отправной точкой для рефакторинга.

## Функциональность

Консольное приложение принимает данные заказа (имя клиента, название товара, количество, цену) и выполняет:
- Проверку корректности входных данных.
- Расчёт скидки в зависимости от количества товара.
- Вывод информации о заказе в консоль.
- Сохранение заказа в текстовый файл `order.txt`.

## Как запустить

1. Убедитесь, что установлена среда .NET (версия 6.0 или выше).
2. Склонируйте репозиторий или скопируйте файл `Program.cs`.
3. Откройте терминал в папке с проектом.
4. Выполните команду: `dotnet run`
5. После запуска в консоли появится сообщение о заказе, а в папке с программой создастся файл `order.txt`.

## Структура проекта (до рефакторинга)

Весь код находится в одном файле `Program.cs` и содержит единственный класс `OrderService` с методом `ProcessOrder`. Точка входа `Main` создаёт экземпляр сервиса и вызывает этот метод.

## Пример работы

Входные данные (заданы в коде):
- Имя клиента: Иван Иванов
- Товар: Ноутбук
- Количество: 20
- Цена: 50000

Вывод в консоль:
```
Заказ оформлен: Иван Иванов, сумма: 950000
Результат: OK
```


## Недостатки текущей реализации (почему нужен рефакторинг)

| Принцип | Нарушение |
|--------|-----------|
| **Single Responsibility (SRP)** | Класс `OrderService` отвечает за всё: проверку данных, расчёт скидки, вывод на консоль, работу с файлом. |
| **DRY (Don't Repeat Yourself)** | Проверки аргументов повторяются вручную, нет переиспользуемых методов. |
| **Исключения вместо кодов возврата** | Метод возвращает строку `"OK"` при успехе или сообщение об ошибке, что затрудняет обработку ошибок и смешивает результат с исключительными ситуациями. |
| **Примитивная одержимость** | Идентификаторы клиента и товара передаются как обычные строки, нет гарантии их корректности. |
| **Жёсткое связывание** | Путь к файлу `"order.txt"` и вывод в консоль вшиты в код, невозможно подменить для тестирования. |
| **Отсутствие обработки исключений** | При ошибке записи файла программа упадёт без понятного сообщения. |
| **Плохая читаемость** | Длинный метод, отсутствие комментариев, сокращённые имена переменных (`qty`). |
| **Отсутствие фигурных скобок** | Условные операторы `if` записаны без `{}`, что может привести к ошибкам при добавлении новых строк. |

## Цели рефакторинга

1. Разделить ответственность между классами.
2. Заменить возврат строк на генерацию исключений.
3. Ввести доменные типы для ключевых понятий (имя клиента, название товара).
4. Вынести работу с файлом в отдельный класс с возможностью настройки пути.
5. Добавить обработку ошибок и пользовательские исключения.
6. Улучшить читаемость и сопровождаемость кода.
7. Подготовить код к написанию модульных тестов.

Результат рефакторинга будет представлен в отдельном репозитории с полностью переработанной архитектурой.
